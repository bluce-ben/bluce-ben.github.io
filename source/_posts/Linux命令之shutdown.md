---
title: Linux命令之shutdown
date: 2017-12-26 18:28:35
categories:
- 每日一个Linux命令
tags:
- Linux命令
---
　　正常情况下，windows在令你不爽的时候，按着电源开关4秒就关机了，或者简单粗暴的方法，直接拔电源。但是在Linux下非常不建议这么做。在 Linux 底下，由于每个程序 (或者说是服务) 都是在背景下执行的，因此，在你看不到的屏幕背后其实可能有相当多人同时在你的主机上面工作，若不正常关机，则可能造成文件系统的毁损 （因为来不及将数据回写到档案中，所以有些服务的档案会有问题！）。
<!--more-->
惯用的关机指令：shutdown
>shutdown 可以达成如下的工作：
* 可以自由选择关机模式：是要关机、重新启动或进入单人操作模式均可；
* 可以设定关机时间: 可以设定成现在立刻关机, 也可以设定某一个特定的时间才关机。
* 可以自定义关机讯息：在关机之前，可以将自己设定的讯息传送给在线 user 。
* 可以仅发出警告讯息：有时有可能你要进行一些测试，而不想让其他的使用者干扰， 或者是明白的告诉使用者某段时间要注意一下！这个时候可以使用 shutdown 来吓一吓使用者，但不是真的要关机！
* 可以选择是否要 fsck 检查文件系统 。

简单的语法规则为：
```
[root@www ~]# /sbin/shutdown [-t 秒] [-arkhncfF] 时间 [警告讯息]
选项不参数：
-t sec ： -t 后面加秒数，亦即【过几秒后关机】的意思
-k ： 不要真的关机，只是发送警告讯息出去！
-r ： 在将系统的服务停掉之后就重新启动 (常用)
-h ： 将系统的服务停掉后，立即关机。 (常用)
-n ： 不经过 init 程序，直接以 shutdown 的功能来关机
-f ： 关机并开机之后，强制略过 fsck 的磁盘检查
-F ： 系统重新启动之后，强制进行 fsck 的磁盘检查
-c ： 取消已经在进行的 shutdown 指令内容。
时间 ： 这是一定要加入的参数！指定系统关机的时间！时间的范例底下会说明。
```

示例：
`[root@www ~]# /sbin/shutdown -h 10 'I will shutdown after 10 mins'`
告诉大家，这部机器会在十分钟后关机！并且“警告讯息”会显示在目前登入者的屏幕前方！
`[root@www ~]# shutdown -h now`
立刻关机，其中 now 相当于时间为 0 的状态
`[root@www ~]# shutdown -h 20:25`
系统在今天的 20:25 分会关机，若在21:25 才下达此指令，则明天才关机
`[root@www ~]# shutdown -h +10`
系统再过十分钟后自动关机
`[root@www ~]# shutdown -r now`
系统立刻重新启动
`[root@www ~]# shutdown -r +30 'The system will reboot'`
再过三十分钟系统会重新启动，并显示后面的讯息给所有在在线的使用者
`[root@www ~]# shutdown -k now 'This system will reboot'`
仅发出警告信件的参数！系统并不会关机！吓唬人！


**重新启动命令：reboot, halt, poweroff**