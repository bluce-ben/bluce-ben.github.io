---
title: PHP 传值与传引用详解
date: 2018-06-05 18:03:52
categories:
- PHP
tags:
- PHP知识点
- PHP
---
首先，看两个示例，进行比较：
```
$a = 1; $b = &$a; $c = 2; $a = &$c; $c = 2;
echo $a.'<br/>';
echo $b.'<br/>';
echo $c.'<br/>';
echo "<hr/>";
```
此时，$a、$b、$c 的值是多少？

```
$a = 1; $b = &$a; $c = 2; $c = &$a; $c = 2;
echo $a.'<br/>';
echo $b.'<br/>';
echo $c.'<br/>';
echo "<hr/>";
```
此时，$a、$b、$c 的值又是多少？

```
$a = 1; $b = &$a; $c = 2; $c = &$a;
echo $a.'<br/>';
echo $b.'<br/>';
echo $c.'<br/>';
echo "<hr/>";
```
此时，$a、$b、$c 的值又是多少？

*（先不要着急往下看，文章的末尾会附属答案。）*
<!--more-->

下面对赋值与赋引用进行说明。
再看个示例，进行说明：
```
$a = 10;//将常量值赋给变量，会为a分配内存空间
$b = $a;//变量赋值给变量，是不是copy了一份副本，b也分配了内存空间呢？
$a = &$c;//引用是不会为c分配空间的，c和a是共用一份空间的。
         //此时，a和c都指向同一个内存空间，且为空。（注：a就不是10了）。

echo $a;//无输出
echo $c;//无输出
echo PHP_EOL;
echo $b;//由于b是副本，输出10

$a = 5;
echo $c;//输出5，因为a和c 是指向同一个内存空间
echo PHP_EOL;
echo $b;//由于b是副本，对a的操作不会影响b，输出10
```
**（1）赋值**
由上面示例可看出，将常量值赋值给变量，会分配内存空间（属于新建变量）；当将变量赋值给变量，只是拷贝一份副本，并不会重新分配内存空间，PHP底层变量计数会加1。只有当这两个变量中的其中任一个改变，才会重新分配内存空间（属于新建变量），且此两个变量的更改与否互相无关。

**（2）赋引用**
&赋引用的时候，视为一个变量定义了一个别名，增加了一个对内存空间的引用。改变其中一个，会影响其他的引用。而使用unset()时，只是断开了对变量内存空间的引用，内存空间不会释放（底层就是释放了指向内存空间的指针）。
由上面示例可看出，赋引用的先后是有影响的。$a=&$c 指把$c的引用地址赋值给$a，且$c的引用地址对应的值为空，因此$a=$c为空。若$c=&$a 指把$a的引用地址赋值给$c，且$a的引用地址对应的值为10，因此$a=$c=10。

<font color="red">**划重点：赋引用的时候，先后赋引用的顺序是有影响的。**</font>

---

<font color="red">**示例答案：**
示例一：$a=2,$b=1,$c=2;
示例二：$a=2,$b=2,$c=2;
示例三：$a=1,$b=1,$c=1;
</font>