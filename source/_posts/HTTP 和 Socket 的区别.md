---
title: HTTP 和 Socket 的区别
date: 2018-04-10 18:29:35
categories:
- 计算机网络
tags:
- 计算机网络
---
要弄明白 http 和 socket 首先要熟悉网络七层：物 数 网 传 会 表 应，如下图
![](/uploads/2018/04/network_protocol.jpg)
<!--more-->

>**HTTP 协议：**超文本传输协议，对应于应用层，用于如何封装数据.
**TCP/UDP 协议：**传输控制协议，对应于传输层，主要解决数据在网络中的传输。
**IP 协议：**对应于网络层，同样解决数据在网络中的传输。

传输数据的时候只使用 TCP/IP 协议(传输层)，如果没有应用层来识别数据内容，传输后的协议都是无用的。
应用层协议很多 FTP,HTTP,TELNET等，也可以自己定义应用层协议。
web 使用 HTTP 作应用层协议，以封装 HTTP 文本信息，然后使用 TCP/IP 做传输层协议，将数据发送到网络上。


#### 一、HTTP 连接
HTTP协议即超文本传送协议(Hypertext Transfer Protocol )，是Web联网的基础，也是手机联网常用的协议之一，HTTP协议是建立在TCP协议之上的一种应用。

HTTP连接最显著的特点是客户端发送的每次请求都需要服务器回送响应，即使用的是<font color="red">“请求-响应”方式</font>。在请求结束后，会主动释放连接。从建立连接到关闭连接的过程称为“一次连接”。即是<font color="red">“无状态”</font>的协议。
* 1）在HTTP 1.0中，客户端的每次请求都要求建立一次单独的连接，在处理完本次请求后，就自动释放连接。
* 2）在HTTP 1.1中则可以在一次连接中处理多个请求，并且多个请求可以重叠进行，不需要等待一个请求结束后再发送下一个请求。

**http 为短连接：**由于HTTP在每次请求结束后都会主动释放连接，因此HTTP连接是一种“短连接”。通常要保持客户端程序的在线状态，需要不断地向服务器发起连接请求。通常的做法是即时不需要获得任何数据，客户端也保持每隔一段固定的时间向服务器发送一次“保持连接”的请求，服务器在收到该请求后对客户端进行回复，表明知道客户端“在线”。若服务器长时间无法收到客户端的请求，则认为客户端“下线”，若客户端长时间无法收到服务器的回复，则认为网络已经断开。


#### 二、Socket 连接
要想明白 Socket，必须要理解 TCP 连接。
TCP 三次握手：握手过程中并不传输数据，在握手后服务器与客户端才开始传输数据，理想状态下，TCP 连接一旦建立，在通讯双方中的任何一方主动断开连接之前 TCP 连接会一直保持下去。

Socket 是对 TCP/IP 协议的封装，<font color="red">Socket 只是个接口不是协议，</font>通过 Socket 我们才能使用 TCP/IP 协议，除了 TCP，也可以使用 UDP 协议来传递数据。

创建 Socket 连接的时候，可以指定传输层协议，可以是 TCP 或者 UDP，当用 TCP 连接，该Socket就是个TCP连接，反之。

Socket 连接,至少需要一对套接字，分为 clientSocket，serverSocket。连接分为3个步骤：服务器监听、客户端请求、连接确认。
**Socket 为长连接：**通常情况下Socket 连接就是 TCP 连接，因此 Socket 连接一旦建立,通讯双方开始互发数据内容，直到双方断开连接。在实际应用中，由于网络节点过多，在传输过程中，会被节点断开连接，因此要通过轮询高速网络，该节点处于活跃状态。

很多情况下，都是需要服务器端向客户端主动推送数据，保持客户端与服务端的实时同步。
* 若双方是 Socket 连接，可以由服务器直接向客户端发送数据。
* 若双方是 HTTP 连接，则服务器需要等客户端发送请求后，才能将数据回传给客户端。因此，客户端定时向服务器端发送请求，不仅可以保持在线，同时也询问服务器是否有新数据，如果有就将数据传给客户端。